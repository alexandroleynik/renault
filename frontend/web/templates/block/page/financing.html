<style>
    .padding10{
        padding-left: 10px;
    }
    .input-error{
        padding-top: 10px;
        color: red;
    }
    .notifyjs-arrow{
        top: 42px;
        left: 10px;
        border-bottom-width: 5px;
        border-bottom-style: solid;
        border-bottom-color: rgb(255, 206, 0);
        border-left-width: 5px;
        border-left-style: solid;
        border-left-color: transparent;
        border-right-width: 5px;
        border-right-style: solid;
        border-right-color: transparent;

    }
    .notifyjs-wrapper {
        z-index: 1;
        position: absolute;
        display: inline-block;
        height: 0;
        width: 0;
    }
    .notifyjs-bootstrap-error {
        color: #383838;
        background-color: #FFCE00;
        border-color: #FFCE00;
        background-image: none;
    }
</style>


<main id="container" role="main">
    <div class="grid-row">
        <div class="col-12">
            <div class="pageHeader">
                <div class="c_023 ">
                    <div class="container-inner">
                        <div class="c_023-1 default">
                            <div class="heading-group">
                                <h1><span>{{{title}}}</span></h1>
                            </div>
                            <!-- <p class="content-copy">Get&#x20;in&#x20;touch&#x20;with&#x20;us.</p>-->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="map-wrapper" id="map-wrapper-block">
        <!--script src="https://maps.googleapis.com/maps/api/js?v=3.exp"></script-->
        <!--script src="https://maps.gstatic.com/maps-api-v3/api/js/21/6/intl/uk_ALL/main.js"></script-->
        <div class="columns12 columns column section c_040 c_040-form c_040-contacts">
            <div class="grid-row">
        <fieldset>
            <div class="c_152-0">
                                                    <span class="location-fields">
                                                        <input type="text" title="Enter your location"
                                                               id="test-drive-form-map-input-search"
                                                               placeholder="{{placeholder}}"
                                                               class="location-input" name="location"
                                                               data-no-results-text="No results - please contact customers services at Renault"
                                                               autocomplete="on">
                                                        <input type="hidden" name="page" value="1">
                                                        <input type="hidden" name="size" value="6">
                                                        <input type="hidden" name="filter" value="BOOK_A_TEST_DRIVE">
                                                        <input aria-invalid="false" value="utf-8" name="_charset_"
                                                               id="_charset_" type="hidden">
                                                        <button type="submit" class="btn-search">{{Search_button}}</button>
                                                        <!--<button type="button" class="btn-geolocate" data-text="Current Location">
                                                            Current Location
                                                        </button>-->
                                                        <span class="autocomplete-suggestions">
                                                        </span>
                                                    </span>
                <input type="hidden" name="latlong" class="location-value"
                       disabled="" value="">
            </div>
        </fieldset>
                </div></div>
        <div class="columns12 columns column section">
            <div class="grid-row grid-row-narrow">
                <div class="col-8">

                    <div class="mapresult" id="mapresult"
                         style="width: 100%; height: 495px;"></div>
                </div>
                <div class="col-4">
                    <div class="mapitembox">
                        <h4></h4>
                        <h5>{{contact_info}}</h5>

                    </div>
                    <!--.mapitembox-->
                </div>

                
            </div>
        </div>
    </div>

    <div class="freeEditorialParsys parsys freeEditorial" >
        <div class="columns column columns12bleed section">

            <div class="grid-row bleed">
                <div class="col-12">
                    <div class="parsys col1-par">
                        <div class="parbase actionPanel section">
                            <div>
                                <script>
                                    $("#contactus").verify({
                                        debug: false
                                    });






                                </script>
                                <form id="contactus" class="hidden"  method="post" autocomplete="off" action="javascript:void(0);">
                                <div class="grid-row">
                                    <div class="contacts_page" >
                                        <div class="all_forms_contact_page">
                                            <div class="inp-group inp-group-text">
                                                <label for="model">{{model}} *</label>
                                                <select name="punkt[5]" id="model" class="inp-decorate">
                                                    {{#each models}}
                                                    <option value="{{this}}">{{this}}</option>
                                                    {{/each}}
                                                </select>
                                            </div>

                                            <!--<div class="inp-group">-->
                                                <!--<label for="#">{{accost}}</label>-->
                                                <!--<select name="#" id="#" class="inp-decorate">-->
                                                    <!--<option value="#">{{Mr}}</option>-->
                                                    <!--<option value="#">{{Ms}}</option>-->
                                                <!--</select>-->
                                            <!--</div>-->
                                            <!--.inp-group-->
                                            <div class="inp-group inp-group-text">
                                                <label for="lastname">{{surname}} *</label>
                                                <input type="text" name="lastname" class="inp-style name" id="lastname" placeholder="{{surname_placeholder}}" data-validate="required,surname,requiredAll">

                                            </div>
                                            <!--.inp-group-->

                                            <div class="inp-group inp-group-text">
                                                <label for="firstname">{{name}} *</label>
                                                <input type="text" name="firstname" class="inp-style name" id="firstname" placeholder="{{name_placeholder}}" data-validate="required,name,requiredAll">

                                            </div>
                                            <!--.inp-group-->
                                             <div class="inp-group inp-group-text">
                                                <label for="secondname">{{patronymic}} *</label>
                                                <input type="text" name="secondname" class="inp-style name" id="secondname" placeholder="{{patronymic_placeholder}}" data-validate="required,patronymic,requiredAll">

                                            </div>
                                            <!--.inp-group-->

                                            <div class="inp-group inp-group-text">
                                                <label for="email">{{E_Mail}} *</label>
                                                <input type="email" name="email" class="inp-style email" id="email" placeholder="{{E_Mail_placeholder}}" data-validate="required,email,requiredAll">

                                            </div>
                                            <div class="inp-group phone-inp-group">
                                                <div class="inp-group__small-col">
                                                    <label for="#">{{phone_code_title}}</label>
                                                    <select name="phone_code" id="phone_code" class="inp-decorate">
                                                        {{#each phone_code}}
                                                        <option value="{{title}}">{{title}}</option>

                                                        {{/each}}
                                                        <option value="other">Другой</option>
                                                    </select>

                                                    <input id="phone_code_input" type="text" name="phonecode_input"
                                                           class="inp-style" data-validate="required,phone_code" style="width: 36px; display: none;">
                                                    <label id="phone_code_input_label" for="phone_code_input" style="width: 36px; display: none;">x</label>
                                                </div>

                                                <div class="inp-group__large-col">
                                                    <label for="#">{{phone}} *</label>
                                                    <input id="phone" type="text" name="phone"
                                                           class="inp-style" placeholder="{{phone_placeholder}}" data-validate="required,phone_part,requiredAll">
                                                </div>
                                            </div>
                                            <!--.inp-group-->
                                            <div class="inp-group inp-group-text" >
                                                <label>{{haveacar}}</label><br>
                                                <div class="form-in" >
                                                    <input type="radio" value="да" id="haveacar_1" name="haveacar" checked="" class="inp-decorate radio connectionKind">
                                                    <label for="punkt9Phone"> {{t.yes}}</label>
                                                    <input type="radio" value="нет" id="haveacar_2" name="haveacar" class="inp-decorate radio connectionKind">
                                                    <label for="punkt9E-mail"> {{t.no}}</label>
                                                    <br>
                                                </div>
                                            </div>
                                            <!--.inp-group-->

                     

                                            

                                           

                                            

                                            <div class="inp-group inp-group-text radiobox_index" >
                                                <label>{{funding}}</label><br>
                                                <div class="form-in" >
                                                    <input type="radio" value="кредит" id="punkt9Phone" name="funding" checked="" class="inp-decorate radio connectionKind">
                                                    <label for="punkt9Phone"> {{credit}}</label>
                                                    <input type="radio" value="лизинг" id="punkt9E-mail" name="funding" class="inp-decorate radio connectionKind">
                                                    <label for="punkt9E-mail"> {{lease}}</label>
                                                    <br>
                                                </div>
                                            </div>

                                        <div class="bt cf">

                                            <div class="inp-group">
                                                <label for="comment">{{comment}} *</label>
                                                <textarea name="comment" id="comment" class="inp-style name" data-validate="required,requiredAll"></textarea>
                                            </div>
                                            <!--.inp-group-->

                                            <div class="inp-group-min">
                                                <label for="#"><input type="checkbox" name="#" class="inp-decorate" id="check_news" checked>
                                                    {{subscribe_to_news}}</label>
                                            </div>
                                            <!--.inp-group-min-->
                                            <div class="inp-group-min padding10" id="phone_subscr">
                                                <label for="#"><input  type="checkbox" name="phone_subscr"
                                                                       class="inp-decorate" checked>{{subscribe_sms}}
                                                </label>

                                            </div>
                                            <div class="inp-group-min padding10" id="email_subscr">
                                                <label for="#"><input  type="checkbox" name="email_subscr"
                                                                       class="inp-decorate" checked >{{subscribe_email}}
                                                </label>

                                            </div>
                                            <!--.inp-group-min-->

                                            <div class="inp-group-min">
                                                <label for="#"><input type="checkbox" name="policy" id="policy" class="inp-decorate selectedVehicle" checked data-validate="agreement,requiredAll">
                                                   {{{consent}}} *</label>
                                            </div>
                                            <!--.inp-group-min-->

                                            <div class="inp-submit">
                                                <input type="submit" value="{{send}}" class="orange-submit submit-form-button"
                                                       id="financing-form-submit" >
                                            </div>
                                            <!--<div class="submit-form">-->
                                                <!--<button class="submit-form-button" id="financing-form-submit" type="submit">{{send}}</button>-->
                                            <!--</div>-->
                                        </div>
                                        <!--.bt-->
                                        </div>
                                        <!--.all_forms_contact_page-->
                                    </div>
                                    <!--.contacts_page-->
                                </div>
                                    </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>


    <script type="text/javascript">
        $(function () {
            // Style input+select
            if ($('.inp-decorate').length) {
                $('.inp-decorate').styler();
            }
        });
        $(".submit-form-button").attr('disabled','disabled');
        $(".submit-form-button").addClass('btn-disabled');
        $( "#phone_code" ).change(function() {
            $val = $( this ).val();
            if($val == 'other'){
                $( "#phone_code").parent().hide();
                $("#phone_code_input").show();
                $("#phone_code_input_label").show();
            }
        });

        $("#phone_code_input_label").on('click', function(){
            $( "#phone_code").find('option').first().attr('selected');
            $( "#phone_code").parent().show();
            $("#phone_code_input").hide();
            $("#phone_code_input_label").hide();

        });
        $('#financing-form-submit').click(function () {
            window.testDriveData['punkt[2]'] = $('#firstname').val();
            window.testDriveData['punkt[3]'] = $('#secondname').val();
            window.testDriveData['punkt[1]'] = $('#lastname').val();
            window.testDriveData['punkt[6]'] = $('#email').val();
            window.testDriveData['punkt7'] = $('input[name="phone"]').val();

            var e = document.getElementById("phone_code");
            var strUser = e.options[e.selectedIndex].value;
            if(strUser == 'other'){
                window.testDriveData['code'] = $("#phone_code_input").val();
                window.testDriveData['code_select'] = 'key';
            } else {
                window.testDriveData['code'] = '';
                window.testDriveData['code_select'] = strUser;
            }
            window.testDriveData['comment'] = $('#comment').val();
            window.testDriveData['haveacar'] = $('input[name="haveacar"]:checked').val();
            window.testDriveData['funding'] = $('input[name="funding"]:checked').val();
            window.testDriveData['punkt[5]'] = $('select[name="punkt[5]"] option:selected').val();
//            window.testDriveData['punkt[10]'] = 'yes';
            if($('#check_news').is(":checked")) {
                window.testDriveData['subscribe'] = 'true';
                if($('input[name=phone_subscr]').is(":checked")){
                    window.testDriveData['subscribe_sms'] = 1;
                }
                if($('input[name=email_subscr]').is(":checked")){
                    window.testDriveData['subscribe_email'] = 1;
                }

            } else {
                window.testDriveData['subscribe'] = 'false';
                window.testDriveData['subscribe_sms'] = '0';
                window.testDriveData['subscribe_email'] = '0';

            }

            if($('#policy').checked){
                window.testDriveData['policy'] = 'true';
            } else {
                window.testDriveData['policy'] = 'false';
            }

            window.testDriveData['submit-val'] = '1';







            app.logger.var(window.testDriveData);

//            preloadFadeIn();

    $.post('http://dealers.renault.ua/uk/funding', window.testDriveData, function (resp) {
        app.logger.var(resp);
        if (resp.match(/thankyou/)) {
            app.changePageAjax(app.view.helper.preffix + '/financing-form-thankyou');
        }
//        else {
//            alert('Error');
//            preloadFadeOut();
//        }
    });


        });

        var checkbox = $('#check_news');
        var phone_subscr = $('#phone_subscr');
        var email_subscr = $('#email_subscr');
        checkbox.change(function(event) {
            var checkbox = event.target;

            if (checkbox.checked) {

                phone_subscr.removeClass('hidden');
                email_subscr.removeClass('hidden');


            } else {
                phone_subscr.addClass('hidden');
                email_subscr.addClass('hidden');

            }
        });
        
                function skipFindDealerBlock(dealer_id) {
            $.each(app.view.allMarkers, function (k, v) {
                if (dealer_id == v.dealer.dealers_id) {

                    $('.select-dealer-header').parent().hide();
                    selectThisDealerButtonClick(v);
                }
            });
        }

        function selectThisDealerButtonClick(dealer) {
            var locale = app.router.locale;

            if ('uk' == locale) {
                locale = 'ua';
            }

            $('.select-dealer-header').html(dealer['dealers_name_' + locale]);
            $('.select-dealer-content').slideUp();
            $('.form .select-dealer-content, .form .select-dealer-header').attr('data-state', 'closed');
            $('.form .select-date-time-content').slideDown();
            $('.form .select-date-time-content, .form .select-date-time-header').attr('data-state', 'open');

        }
        
        if (app.config.frontend_app_dealer_id && app.config.frontend_app_dealer_id > 0) {
            setTimeout(function () {
                skipFindDealerBlock(app.config.frontend_app_dealer_id);

            }, 3000);                        
                        
            $('#map-wrapper-block').hide();
            $('#contactus').show();
            
            $('.form .select-date-time-content').slideDown();
            $('.form .select-date-time-content, .form .select-date-time-header').attr('data-state', 'open');
        }
        
        
    </script>

</main>


<!--<script>-->
    <!--var form = $("#contactus");-->
    <!--form.validate({-->
        <!--errorClass: "input-error"-->
        <!--//validClass: "inp-error"-->



    <!--});-->
    <!--$(form).bind('change keyup', function () {-->
        <!--if ($(this).validate().checkForm()) {-->
            <!--$('#test-drive-form-submit').removeClass('btn-disabled').attr('disabled', false);-->


        <!--} else {-->
            <!--$('#test-drive-form-submit').addClass('btn-disabled').attr('disabled', true);-->

        <!--}-->
    <!--});-->
    <!--$.validator.setDefaults({-->
    <!--debug: true,-->
        <!--success: "valid"-->

    <!--});-->
    <!--$.validator.addClassRules(-->
            <!--"name", {-->
                <!--//required: true,-->
                <!--minlength: 3,-->
                <!--maxlength: 30,-->
                <!--required: function(element) {-->

                    <!--return $("#firstname").val() == '/[а-яА-Я]/';-->
                <!--}-->

            <!--},-->

            <!--"email", {-->
                <!--required: true,-->
                <!--email: true-->
            <!--},-->

            <!--"phone_ua", {-->
                <!--required: true,-->
                <!--minlength: 7-->

            <!--},-->
            <!--"selectedVehicle", {-->
                <!--required: true-->
            <!--}-->
    <!--);-->


   <!--$.validator.addMethod("phone_ua", function (phone_number, element) {-->
<!--phone_number = phone_number.replace(/\(|\)|\s+|-/g, "");-->

        <!--return this.optional(element) || phone_number.length > 7 &&-->
                <!--phone_number.match(/\+?\d{12}/);-->
    <!--});-->

    <!--$("#phone").mask("+38(099)999-99-99");-->

    <!--});-->
<!--</script>-->
